<%# if user_signed_in? %>
<div style="text-align: right">
  <%= link_to "ADD BOOK", new_book_path, class: "btn btn-success" %>
</div>
<br/>
<div style="display: flex; justify-content: space-between;">
  <h1>BOOK LIST</h1>
  <div>
    <%= form_with(url: books_path, method: :get) do |form| %>
      <div class="form-group" style="display: flex;">
        <%= form.text_field :search, placeholder: "SEARCH BOOK NAME", class: "form-control", style: "margin-right: 1rem;" %>
        <%= form.submit "SEARCH", class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</div>
<table class="table table-striped table-hover table-bordered">
  <thead class="table-dark">
    <tr>
      <th scope="col">Title</th>
      <th scope="col">Author</th>
      <th scope="col">Genre</th>
      <th scope="col">Year</th>
      <th scope="col" colspan="3">Action</th>
    </tr>
  </thead>
  <tbody>
    <% @books.each do |book| %>
      <tr>
        <td>
          <%= link_to book.title, style: "text-decoration: none; color: inherit;" %>
        </td>
        <td><%= book.author %></td>
        <td><%= book.genre %></td>
        <td><%= book.year_of_publication %></td>
        <td><%= link_to "VIEW", book, class: "btn btn-outline-primary btn-sm" %></td>
        <%# if book.user_id == current_user.id %>
        <td><%= link_to "UPDATE", edit_book_path(book), class: "btn btn-outline-warning btn-sm" %></td>
        <td><%= link_to "DELETE", book,  data: { confirm: "Are you sure?", turbo_confirm: "Are you sure?" }, method: :delete, class: "btn btn-outline-danger btn-sm" %></td>
        <%# else %>
        <td><%= link_to "UPDATE", edit_book_path(book), class: "btn btn-outline-secondary btn-sm", disabled: true, style: "opacity: 0.75; pointer-events: none; cursor: not-allowed; font-size: 0.75rem;" %></td>
        <td><%= link_to "DELETE", book, method: :delete, class: "btn btn-outline-secondary btn-sm", disabled: true, style: "opacity: 0.75; pointer-events: none; cursor: not-allowed; font-size: 0.75rem;" %></td>
        <%# end %>
      </tr>
    <% end %>
  </tbody>
</table>
<br>
<%# else %>
<%# <h1>Hello World!</h1> %>
<%# end %>
